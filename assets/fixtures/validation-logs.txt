MacBookPro:rules jonyfq$ codex execpolicy check --rules ~/.codex/rules/default.rules -- dev.kit exec
{"matchedRules":[{"prefixRuleMatch":{"matchedPrefix":["dev.kit","exec"],"decision":"forbidden","justification":"Avoid Codex loop: do not call dev.kit exec from Codex."}}],"decision":"forbidden"}
MacBookPro:rules jonyfq$ codex execpolicy check --rules ~/.codex/rules/default.rules -- dev.kit help
{"matchedRules":[]}
MacBookPro:rules jonyfq$ cat ~/.codex/skills/
.system/                devkit-install-cleanup/ workflow-generator/
MacBookPro:rules jonyfq$ cat ~/.codex/skills/
.system/                devkit-install-cleanup/ workflow-generator/
MacBookPro:rules jonyfq$ cat ~/.codex/skills/devkit-install-cleanup/SKILL.md 
---
name: devkit-install-cleanup
description: Install, configure, validate, uninstall, and clean up dev.kit on the host (includes Codex integration checks).
---

# dev.kit Install & Cleanup

Use this skill when you need to install dev.kit, perform initial configuration, validate the setup, or uninstall and clean up a host environment.

## Preflight

- Confirm repo root and current branch.
- Capture current state:
  - `dev.kit paths`
  - `dev.kit doctor`

## Install

Prefer the built-in command:
- `dev.kit install`

Fallback (if needed):
- `bin/scripts/install.sh`

## Enable shell integration

- `dev.kit enable --shell=bash` or `dev.kit enable --shell=zsh`
- If you need to revert later, remove the `source ".../dev.kit.sh"` line from the shell profile.

## Validate

- `dev.kit doctor`
- Dev-mode test suite:
  - `dev.kit test install --run --force`
  - With purge: `DEV_KIT_TEST_PURGE=true dev.kit test install --run --force`
- If Codex rules were changed:
  - `dev.kit codex rules --plan`
  - `dev.kit codex rules --apply`
  - `codex execpolicy check ~/.codex/rules/default.rules`

## Uninstall

- `dev.kit uninstall`
- To remove engine state/config:
  - `dev.kit uninstall --purge`

## Cleanup checklist

- Remove shell profile `source` line if still present.
- Verify binaries are removed:
  - `command -v dev.kit`
- Verify engine dir state:
  - `ls -la ~/.udx/dev.kit`

## Experience log

- Record results in `src/context/20_config/experience/` using the session summary template.
- Reusable test harness: `bin/scripts/ux-check.sh` (wraps `dev.kit test install`, set `DEV_KIT_UX_*` env vars to customize).
MacBookPro:rules jonyfq$ cat ~/.codex/skills/workflow-generator/
references/ SKILL.md    
MacBookPro:rules jonyfq$ cat ~/.codex/skills/workflow-generator/SKILL.md 
---
name: workflow-generator
description: Generate or refactor workflow documents with codex exec steps, including extraction gates and child workflows. Use when the user asks to create a workflow, update a workflow, or split steps into child workflows.
---

# Workflow Generator

Use this skill to convert ad-hoc requests into workflow documents that follow the codex exec format.

## Required references

Read these before generating or restructuring workflows:

- `references/prompt-as-workflow-approach.md`
- `references/workflow_step_gates.md`

## Workflow output rules

- Each step must include: Task, Input, Logic/Tooling, Expected output/result.
- Use `codex exec` for each step.
- Add `done: false` per step.
- If the Extraction Gate triggers (2+ yes), create a child workflow and reference it from the parent.
- Keep steps deterministic, plan-first, and repo-scoped.

## Placement rules

- Parent workflows live in `workflows/`.
- Child workflows live under `workflows/<parent>/<child>/index.md`.
- Keep filenames stable and human-readable.
MacBookPro:rules jonyfq$ cat ~/.codex/skills/workflow-generator/references/
prompt-as-workflow-approach.md  workflow_step_gates.md
MacBookPro:rules jonyfq$ cat ~/.codex/skills/workflow-generator/references/prompt-as-workflow-approach.md
# Prompt-as-Workflow Approach

This prompt defines how to generate workflow documents that are both human-readable and executable via `codex exec`.
It can be used to create new workflows or to convert ad-hoc requests into a structured workflow.

---

## Prompt (Workflow Generator)

Use this prompt to generate a workflow file from a user request:

"""
You are a deterministic workflow generator.

Task: Convert the user request into a workflow document that uses `codex exec` steps.

Input:
- User request (freeform)
- Any referenced files or context

Logic/Tooling:
- Derive the minimal number of steps required to complete the request.
- Each step must include: Task, Input, Logic/Tooling, Expected output/result.
- Use `codex exec` for each step.
- If a step has 2+ Extraction Gate "yes" answers, extract it as a child workflow.
- When extracting, create a new workflow under `workflows/<name>/index.md` and reference it from the parent step.
- Keep steps deterministic, plan-first, and repo-scoped.

Output/Result:
- A single Markdown workflow file with ordered steps and `done: false` per step.
- Any child workflow files referenced by parent steps.
"""

---

## Extraction Gate Reference

See `docs/workflow_step_gates.md`.
MacBookPro:rules jonyfq$ cat ~/.codex/skills/workflow-generator/references/
prompt-as-workflow-approach.md  workflow_step_gates.md
MacBookPro:rules jonyfq$ cat ~/.codex/skills/workflow-generator/references/workflow_step_gates.md
# Workflow Step Gates

This document defines when a workflow step should be extracted into a child workflow.

## Extraction Gate

Use this checklist for any workflow step:

- Reused in more than one workflow? yes/no
- More than 3 sub-steps? yes/no
- Needs independent validation? yes/no

If 2 or more are "yes", extract to a child workflow.

## Inline Gate

Keep the step inline when:

- The step is one-off or single-use.
- The step has 3 or fewer sub-steps.
- The step does not require separate validation or rollback.
MacBookPro:rules jonyfq$ 